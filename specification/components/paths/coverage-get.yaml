description: |
  ## Overview
  To be filled in later
summary: Get a patients coverage
operationId: get-coverage
parameters:
  - $ref: '../../personal-demographics.yaml#/components/parameters/SubscriberIdentifier'
responses:
  '200':
    description: |
      A completed search for coverage. This will contain zero or one Coverage resources in the Bundle.

    headers:
      X-Correlation-Id:
        $ref: '../../personal-demographics.yaml#//components/headers/X-Correlation-Id'
      X-Request-Id:
        $ref: '../../personal-demographics.yaml#//components/headers/X-Request-Id'

  '4XX':
    description: |
        An error occurred as follows:

        | HTTP status | Error code                 | Description                                                                                                                                |
        | ----------- | -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
        | 400         | INVALID_RESOURCE_ID        | Invalid NHS number.
        | 400         | INVALID_SEARCH_DATA	       | Invalid combination of search parameters. For details, see the `diagnostics` field.
        | 400         | MISSING_VALUE              | Missing header or query parameter. For details, see the `diagnostics` field.
        | 400         | INVALID_VALUE              | Invalid header or query parameter. For details, see the `diagnostics` field.
        | 401         | ACCESS_DENIED     	       | Access token missing, invalid or expired, or calling application not configured for this operation.
        | 403         | ACCESS_DENIED     	       | User cannot perform this operation.
        | 404         | RESOURCE_NOT_FOUND         | Patient does not exist for given NHS number.
        | 404         | INVALIDATED_RESOURCE       | Patient did exist for given NHS number, but has been invalidated and not superseded by another NHS number.
        | 408         | UNABLE_TO_CALL_SERVICE     | The downstream domain processing has not completed within the configured timeout period.
        | 429         | TOO_MANY_REQUESTS          | You have exceeded your application's [rate limit](https://digital.nhs.uk/developer/guides-and-documentation/reference-guide#rate-limits).

    headers:
      X-Correlation-Id:
        $ref: '../../personal-demographics.yaml#//components/headers/X-Correlation-Id'
      X-Request-Id:
        $ref: '../../personal-demographics.yaml#//components/headers/X-Request-Id'

    content:
      application/fhir+json:
        schema:
          $ref: '../../personal-demographics.yaml#//components/schemas/OperationOutcome'
        example:
          resourceType: OperationOutcome
          issue:
            - severity: error
              code: forbidden
              details:
                coding:
                  - system: 'https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode'
                    version: '1'
                    code: ACCESS_DENIED
                    display: Cannot GET resource with user-restricted access token
              diagnostics: "Your app has insufficient permissions to use this operation. Please contact support."