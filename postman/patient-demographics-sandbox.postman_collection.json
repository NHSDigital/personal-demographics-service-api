{
	"info": {
		"_postman_id": "13bc21ad-262f-4235-bfb8-965314509be1",
		"name": "patient-demographics-sandbox",
		"description": "Sandbox example requests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "32880910"
	},
	"item": [
		{
			"name": "Search for a patient",
			"item": [
				{
					"name": "Search with date range",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&gender=female&birthdate=ge2010-10-21&birthdate=le2010-10-23",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "ge2010-10-21"
								},
								{
									"key": "birthdate",
									"value": "le2010-10-23"
								}
							]
						},
						"description": "Example of a \"birthdate\" range test (ge2010-10-21 & le2010-10-23)  will return a single result with a \"birthdate\" = 2010-10-22"
					},
					"response": []
				},
				{
					"name": "Basic search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {",
									"    pm.expect(pm.response.code).to.equal(200);",
									"});",
									"pm.test(\"Searchset is returned\", function () {",
									"  const jsonData = pm.response.json();",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");",
									"  pm.expect(jsonData.total).to.equal(1);",
									"",
									"});",
									"pm.test(\"Searchset includes patient 9000000009\", function () {",
									"  const jsonData = pm.response.json();",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&gender=female&birthdate=eq2010-10-22",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								}
							]
						},
						"description": "Example of a simple search using minimum search parameters (\"family\" name, \"gender\" & \"date of birth\") will return a single result."
					},
					"response": []
				},
				{
					"name": "Basic search including phone",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&gender=female&birthdate=eq2010-10-22&phone=01632960587",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "phone",
									"value": "01632960587"
								}
							]
						},
						"description": "Example of a simple search including phone using minimum search parameters (\"family\" name, \"gender\" & \"date of birth\" & \"phone\") will return a single result."
					},
					"response": []
				},
				{
					"name": "Basic search including email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&gender=female&birthdate=eq2010-10-22&email=jane.smith@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "email",
									"value": "jane.smith@example.com"
								}
							]
						},
						"description": "Example of a simple search including email using minimum search parameters (\"family\" name, \"gender\" & \"date of birth\" & \"email\") will return a single result."
					},
					"response": []
				},
				{
					"name": "Basic search including email and phone",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&gender=female&birthdate=eq2010-10-22&phone=01632960587&email=jane.smith@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "phone",
									"value": "01632960587"
								},
								{
									"key": "email",
									"value": "jane.smith@example.com"
								}
							]
						},
						"description": "Example of a simple search including phone and email using minimum search parameters (\"family\" name, \"gender\" & \"date of birth\" & \"phone\" & \"email\") will return a single result."
					},
					"response": []
				},
				{
					"name": "Basic search including email and phone negative match",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"An empty searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(0);\r",
									"  pm.expect(jsonData).to.not.have.property(\"entry\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&gender=female&birthdate=eq2010-10-22&phone=0121111111&email=deb.trotter@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "phone",
									"value": "0121111111"
								},
								{
									"key": "email",
									"value": "deb.trotter@example.com"
								}
							]
						},
						"description": "Example of a simple search including phone and email using minimum search parameters (\"family\" name, \"gender\" & \"date of birth\" & \"phone\" & \"email\") will retur no results (non match)."
					},
					"response": []
				},
				{
					"name": "Multi parameter search including phone",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?_fuzzy-match=false&_exact-match=false&_max-results=1&family=Smith&gender=female&birthdate=eq2010-10-22&given=Jane&death-date=eq2010-10-22&address-postcode=LS1 6AE&general-practitioner=Y12345&phone=01632960587",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "_fuzzy-match",
									"value": "false"
								},
								{
									"key": "_exact-match",
									"value": "false"
								},
								{
									"key": "history",
									"value": "true",
									"disabled": true
								},
								{
									"key": "_max-results",
									"value": "1"
								},
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "death-date",
									"value": "eq2010-10-22"
								},
								{
									"key": "address-postcode",
									"value": "LS1 6AE"
								},
								{
									"key": "general-practitioner",
									"value": "Y12345"
								},
								{
									"key": "phone",
									"value": "01632960587"
								}
							]
						},
						"description": "Example of a multiparameter search using various search parameters including phone (\"family\" name, \"gender\" & \"date of birth\" & \"given\" & \"death-date\" & \"address-postcode\" & \"general-practitioner\" & \"phone\") will return a single result."
					},
					"response": []
				},
				{
					"name": "Multi parameter search including email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?_fuzzy-match=false&_exact-match=false&history=true&_max-results=1&family=Smith&gender=female&birthdate=eq2010-10-22&given=Jane&death-date=eq2010-10-22&address-postcode=LS1 6AE&general-practitioner=Y12345&email=jane.smith@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "_fuzzy-match",
									"value": "false"
								},
								{
									"key": "_exact-match",
									"value": "false"
								},
								{
									"key": "history",
									"value": "true"
								},
								{
									"key": "_max-results",
									"value": "1"
								},
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "death-date",
									"value": "eq2010-10-22"
								},
								{
									"key": "address-postcode",
									"value": "LS1 6AE"
								},
								{
									"key": "general-practitioner",
									"value": "Y12345"
								},
								{
									"key": "email",
									"value": "jane.smith@example.com"
								}
							]
						},
						"description": "Example of a multiparameter search using various search parameters including phone (\"family\" name, \"gender\" & \"date of birth\" & \"given\" & \"death-date\" & \"address-postcode\" & \"general-practitioner\" & \"email\") will return a single result."
					},
					"response": []
				},
				{
					"name": "Multi parameter search including phone and email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?_fuzzy-match=false&_exact-match=false&_history=true&_max-results=1&family=Smith&gender=female&birthdate=eq2010-10-22&given=Jane&death-date=eq2010-10-22&address-postcode=LS1 6AE&general-practitioner=Y12345&phone=01632960587&email=jane.smith@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "_fuzzy-match",
									"value": "false"
								},
								{
									"key": "_exact-match",
									"value": "false"
								},
								{
									"key": "_history",
									"value": "true"
								},
								{
									"key": "_max-results",
									"value": "1"
								},
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "death-date",
									"value": "eq2010-10-22"
								},
								{
									"key": "address-postcode",
									"value": "LS1 6AE"
								},
								{
									"key": "general-practitioner",
									"value": "Y12345"
								},
								{
									"key": "phone",
									"value": "01632960587"
								},
								{
									"key": "email",
									"value": "jane.smith@example.com"
								}
							]
						},
						"description": "Example of a multiparameter search using various search parameters including phone (\"family\" name, \"gender\" & \"date of birth\" & \"given\" & \"death-date\" & \"address-postcode\" & \"general-practitioner\" & \"phone\" & \"email\") will return a single result."
					},
					"response": []
				},
				{
					"name": "Too few search parameters",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 400\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(400);\r",
									"});\r",
									"pm.test(\"Unsupported Service error\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.issue[0].details.coding[0].code).to.equal(\"UNSUPPORTED_SERVICE\");\r",
									"  pm.expect(jsonData.issue[0].details.coding[0].display).to.equal(\"Unsupported Service\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							]
						},
						"description": "Example error caused by providing too few (none in this instance) search parameters"
					},
					"response": []
				},
				{
					"name": "Invalid date format - birth date",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 400\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(400);\r",
									"});\r",
									"pm.test(\"Unsupported Service error\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.issue[0].details.coding[0].code).to.equal(\"INVALID_VALUE\");\r",
									"  pm.expect(jsonData.issue[0].diagnostics).to.equal(\"Invalid value - '20101022' in field 'birthdate'\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&given=Jane&gender=female&birthdate=20101022&=",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "20101022"
								},
								{
									"key": "",
									"value": ""
								}
							]
						},
						"description": "Example error caused by providing `birthdate` query param in an invalid format"
					},
					"response": []
				},
				{
					"name": "Fuzzy search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000017\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000017\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=smith&given=Jane&gender=female&birthdate=2010-10-22&_fuzzy-match=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "2010-10-22"
								},
								{
									"key": "_fuzzy-match",
									"value": "true"
								}
							]
						},
						"description": "HTTP Status 200 with single search result."
					},
					"response": []
				},
				{
					"name": "Fuzzy search including phone",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=smith&given=Jane&gender=female&birthdate=2010-10-22&phone=01632960587&_fuzzy-match=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "2010-10-22"
								},
								{
									"key": "phone",
									"value": "01632960587"
								},
								{
									"key": "_fuzzy-match",
									"value": "true"
								}
							]
						},
						"description": "HTTP Status 200 with single search result."
					},
					"response": []
				},
				{
					"name": "Fuzzy search including email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=smith&given=Jane&gender=female&birthdate=2010-10-22&email=jane.smith@example.com&_fuzzy-match=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "2010-10-22"
								},
								{
									"key": "email",
									"value": "jane.smith@example.com"
								},
								{
									"key": "_fuzzy-match",
									"value": "true"
								}
							]
						},
						"description": "HTTP Status 200 with single search result."
					},
					"response": []
				},
				{
					"name": "Fuzzy search including phone and email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=smith&given=Jane&gender=female&birthdate=2010-10-22&phone=01632960587&email=jane.smith@example.com&_fuzzy-match=true",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "2010-10-22"
								},
								{
									"key": "phone",
									"value": "01632960587"
								},
								{
									"key": "email",
									"value": "jane.smith@example.com"
								},
								{
									"key": "_fuzzy-match",
									"value": "true"
								}
							]
						},
						"description": "HTTP Status 200 with single search result."
					},
					"response": []
				},
				{
					"name": "Invalid date format - death date",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 400\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(400);\r",
									"});\r",
									"pm.test(\"Unsupported Service error\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.issue[0].details.coding[0].code).to.equal(\"INVALID_VALUE\");\r",
									"  pm.expect(jsonData.issue[0].diagnostics).to.equal(\"Invalid value - '20101022' in field 'death-date'\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smith&given=Jane&birthdate=2000-01-01&gender=female&death-date=20101022",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smith"
								},
								{
									"key": "given",
									"value": "Jane"
								},
								{
									"key": "birthdate",
									"value": "2000-01-01"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "death-date",
									"value": "20101022"
								}
							]
						},
						"description": "Example error caused by providing `birthdate` query param in an invalid format"
					},
					"response": []
				},
				{
					"name": "Wildcard search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(2);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes 2 patients\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"  pm.expect(jsonData.entry[1].resource.id).to.equal(\"9000000017\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Sm*"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								}
							]
						},
						"description": "Example of a wildcarded search, where the \"family\" name is wildcarded, will return a result of 2 patients - Jane Smith patient (nhsId - 9000000009) & Jayne Smith (nhsId - 9000000017)"
					},
					"response": []
				},
				{
					"name": "Wildcard search with results limit",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Too Many Matches error\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.issue[0].details.coding[0].code).to.equal(\"TOO_MANY_MATCHES\");\r",
									"  pm.expect(jsonData.issue[0].details.coding[0].display).to.equal(\"Too Many Matches\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22&_max-results=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Sm*"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "_max-results",
									"value": "1"
								}
							]
						},
						"description": "Example of a wildcarded search with limited results, where the \"family\" name is wildcarded and \"_max-results\" is added, which limits the number of results to 2 patients.\n\nThis request will return search bundle containing 2 patients - Jane Smith patient (nhsId - 9000000009) & Jayne Smith (nhsId - 9000000017)\n\nNote: if \"_max-results\" is reduced to 1 then a \"TOO_MANY_RESULTS\" error response will be returned, as the number of matched patients found is greater than the \"_max-results\" parameter."
					},
					"response": []
				},
				{
					"name": "Wildcard search including phone",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22&phone=01632960587",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Sm*"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "phone",
									"value": "01632960587"
								}
							]
						},
						"description": "Example of a wildcarded search, where the \"family\" name is wildcarded, when phone is included will return 1 patient - Jane Smith patient (nhsId - 9000000009)"
					},
					"response": []
				},
				{
					"name": "Wildcard search including email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22&email=jane.smith@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Sm*"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "email",
									"value": "jane.smith@example.com"
								}
							]
						},
						"description": "Example of a wildcarded search, where the \"family\" name is wildcarded, when email is included will return 1 patient - Jane Smith patient (nhsId - 9000000009)"
					},
					"response": []
				},
				{
					"name": "Unsuccessful search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"An empty searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(0);\r",
									"  pm.expect(jsonData).to.not.have.property(\"entry\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Bingham&given=John&gender=male&birthdate=1934-12-18",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Bingham"
								},
								{
									"key": "given",
									"value": "John"
								},
								{
									"key": "gender",
									"value": "male"
								},
								{
									"key": "birthdate",
									"value": "1934-12-18"
								}
							]
						},
						"description": "Example of a search that is valid, but returns no results"
					},
					"response": []
				},
				{
					"name": "Search with limited results inc phone",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22&phone=01632960587&_max-results=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Sm*"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "phone",
									"value": "01632960587"
								},
								{
									"key": "_max-results",
									"value": "1"
								}
							]
						},
						"description": "Example of a wildcarded search with limited results, where the \"family\" name is wildcarded and \"_max-results\" is added, but adding phone/email should only return 1 result, so \"_max-results\" is superfluous in this case"
					},
					"response": []
				},
				{
					"name": "Search with limited results inc email",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response status code is 200\", function () {\r",
									"    pm.expect(pm.response.code).to.equal(200);\r",
									"});\r",
									"pm.test(\"Searchset is returned\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.resourceType).to.equal(\"Bundle\");\r",
									"  pm.expect(jsonData.type).to.equal(\"searchset\");\r",
									"  pm.expect(jsonData.total).to.equal(1);\r",
									"\r",
									"});\r",
									"pm.test(\"Searchset includes patient 9000000009\", function () {\r",
									"  const jsonData = pm.response.json();\r",
									"  pm.expect(jsonData.entry[0].resource.id).to.equal(\"9000000009\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Sm*&gender=female&birthdate=eq2010-10-22&email=janet.smythe@example.com&_max-results=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Sm*"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2010-10-22"
								},
								{
									"key": "email",
									"value": "janet.smythe@example.com"
								},
								{
									"key": "_max-results",
									"value": "1"
								}
							]
						},
						"description": "Example of a wildcarded search with limited results, where the \"family\" name is wildcarded and \"_max-results\" is added, but adding phone/email should only return 1 result, so \"_max-results\" is superfluous in this case"
					},
					"response": []
				},
				{
					"name": "Restricted (sensitive) patient search",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient?family=Smythe&given=Janet&gender=female&birthdate=eq2005-06-16",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient"
							],
							"query": [
								{
									"key": "family",
									"value": "Smythe"
								},
								{
									"key": "given",
									"value": "Janet"
								},
								{
									"key": "gender",
									"value": "female"
								},
								{
									"key": "birthdate",
									"value": "eq2005-06-16"
								},
								{
									"key": "_fuzzy-match",
									"value": "true",
									"disabled": true
								}
							]
						},
						"description": "Example of a search for a patient with restricted data - will return a patient with restricted data, e.g. address & telecom will not be returned and the meta.security.code object will be \"R\", representing a restricted patient."
					},
					"response": []
				}
			],
			"description": "Example requests that relate to the Search Patient endpoint, as described under:\n\nhttps://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir#api-Default-search-patient",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Retrieve a patient's record",
			"item": [
				{
					"name": "Patient exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"NHS Number correct\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.id).to.eql('9000000009');\r",
									"});\r",
									"pm.test(\"Unrestricted patient\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.meta.security[0]).to.eql({\r",
									"      \"code\": \"U\",\r",
									"      \"display\": \"unrestricted\",\r",
									"      \"system\": \"http://terminology.hl7.org/CodeSystem/v3-Confidentiality\"\r",
									"    });\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$randomUUID}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient/9000000009",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009"
							]
						},
						"description": "Example of successful patient retrieval"
					},
					"response": []
				},
				{
					"name": "Sensitive patient exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"NHS Number correct\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.id).to.eql('9000000025');\r",
									"});\r",
									"pm.test(\"Unrestricted patient\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.meta.security[0]).to.eql({\r",
									"      \"code\": \"R\",\r",
									"      \"display\": \"restricted\",\r",
									"      \"system\": \"http://terminology.hl7.org/CodeSystem/v3-Confidentiality\"\r",
									"    });\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient/9000000025",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000025"
							]
						},
						"description": "Example of successful Sensitive patient retrieval - will return a patient with restricted data, e.g. address & telecom will not be returned and the meta.security.code object will be \"R\", representing a restricted patient."
					},
					"response": []
				},
				{
					"name": "Invalid NHS Number",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});\r",
									"pm.test(\"INVALID_RESOURCE_ID error is returned\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.issue[0].details.coding[0].code).to.eql(\"INVALID_RESOURCE_ID\");\r",
									"    pm.expect(jsonData.issue[0].details.coding[0].display).to.eql(\"Resource Id is invalid\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient/9000000000",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000000"
							]
						},
						"description": "Specifying an *invalid* NHS number. NHS Numbers must conform to a [specific format](https://www.datadictionary.nhs.uk/data_dictionary/attributes/n/nhs/nhs_number_de.asp)"
					},
					"response": []
				},
				{
					"name": "Patient doesn't exist",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", function () {\r",
									"    pm.response.to.have.status(404);\r",
									"});\r",
									"pm.test(\"RESOURCE_NOT_FOUND error is returned\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.issue[0].details.coding[0].code).to.eql(\"RESOURCE_NOT_FOUND\");\r",
									"    pm.expect(jsonData.issue[0].details.coding[0].display).to.eql(\"Resource not found\");\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient/9111231130",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9111231130"
							]
						},
						"description": "Requesting a patient that doesn't exist (but providing a valid NHS number)"
					},
					"response": []
				}
			],
			"description": "Example requests that relate to the Retrieve Patient endpoint, as described under:\n\nhttps://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir#api-Default-get-patient",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Update a patient's record",
			"item": [
				{
					"name": "Valid Updates - PLEASE READ THE DESCRIPTION OF THIS FOLDER",
					"item": [
						{
							"name": "Update Name",
							"item": [
								{
									"name": "Add a new name to the patient",
									"item": [
										{
											"name": "Successful update: Add a new name to the patient",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"//pm.collectionVariables.set(\"contentLocation\",pm.response.headers.get('Content-Location').substr(1, 46));\r",
															"pm.collectionVariables.set(\"contentLocation\",pm.response.headers.get('Content-Location'));\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"add\",\r\n      \"path\": \"/name/-\",\r\n      \"value\": {\r\n        \"use\": \"old\",\r\n        \"period\": {\r\n          \"start\": \"2019-12-31\"\r\n        },\r\n        \"text\": \"Dr Joe H. M. Bloggs PhD\",\r\n        \"prefix\": \"Dr\",\r\n        \"given\": [\r\n          \"Joe\",\r\n          \"Horation\",\r\n          \"Maximus\"\r\n        ],\r\n        \"family\": \"Bloggs\",\r\n        \"suffix\": \"PhD\"\r\n      }\r\n    }\r\n  ]\r\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									],
									"description": "Run the the requests in the following order:\r\n\r\n1. \"Patch - Successful update: Add a new name to the patient\" the result of",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										},
										{
											"listen": "test",
											"script": {
												"type": "text/javascript",
												"exec": [
													""
												]
											}
										}
									]
								},
								{
									"name": "Update the first given name entry",
									"item": [
										{
											"name": "Successful update: Update the first given name entry",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n  \"correction\": true,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"replace\",\r\n      \"path\": \"/name/0/given/0\",\r\n      \"value\": \"Anne\"\r\n    }\r\n  ]\r\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Remove a name no longer in use",
									"item": [
										{
											"name": "Successful update: Remove a name no longer in use",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								}
							]
						},
						{
							"name": "Update Death Notification and DoD",
							"item": [
								{
									"name": "Add Death Notification and DoD",
									"item": [
										{
											"name": "Successful update: Add DOD & Notification",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"patches\": [\n\t\t{\n\t\t\t\"op\": \"add\",\n\t\t\t\"path\": \"/deceasedDateTime\",\n\t\t\t\"value\": \"2020-01-01\"\n\t\t},\n\t\t{\n\t\t\t\"op\": \"add\",\n\t\t\t\"path\": \"/extension/-\",\n\t\t\t\"value\": {\n\t\t\t\t\"extension\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"url\": \"deathNotificationStatus\",\n\t\t\t\t\t\t\"valueCodeableConcept\": {\n\t\t\t\t\t\t\t\"coding\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"code\": \"1\",\n\t\t\t\t\t\t\t\t\t\"display\": \"Informal - death notice received via an update from a local NHS Organisation such as GP or Trust\",\n\t\t\t\t\t\t\t\t\t\"system\": \"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus\",\n\t\t\t\t\t\t\t\t\t\"version\": \"1.0.0\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"url\": \"systemEffectiveDate\",\n\t\t\t\t\t\t\"valueDateTime\": \"2020-02-27T16:14:58+00:00\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t\"url\": \"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus\"\n\t\t\t}\n\t\t}\n\t]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000033",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000033"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Replace Death Notification and DoD",
									"item": [
										{
											"name": "Update - Replace DoD and Death Notification Informal",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"patches\": [\n\t\t{\n\t\t\t\"op\": \"replace\",\n\t\t\t\"path\": \"/deceasedDateTime\",\n\t\t\t\"value\": \"2010-10-23\"\n\t\t},\n\t\t{\n\t\t\t\"op\": \"replace\",\n\t\t\t\"path\": \"/extension/3\",\n\t\t\t\"value\": {\n\t\t\t\t\"extension\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"url\": \"deathNotificationStatus\",\n\t\t\t\t\t\t\"valueCodeableConcept\": {\n\t\t\t\t\t\t\t\"coding\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"code\": \"1\",\n\t\t\t\t\t\t\t\t\t\"display\": \"Informal - death notice received via an update from a local NHS Organisation such as GP or Trust\",\n\t\t\t\t\t\t\t\t\t\"system\": \"https://fhir.hl7.org.uk/CodeSystem/UKCore-DeathNotificationStatus\",\n\t\t\t\t\t\t\t\t\t\"version\": \"1.0.0\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\"url\": \"systemEffectiveDate\",\n\t\t\t\t\t\t\"valueDateTime\": \"2010-10-23T16:14:58+00:00\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t\"url\": \"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-DeathNotificationStatus\"\n\t\t\t}\n\t\t}\n\t]\n}",
													"options": {
														"raw": {
															"language": "json"
														}
													}
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												},
												"description": "Replace a DOD and Death Notification where there is already a DOD and Notification present for the patient"
											},
											"response": []
										}
									]
								}
							]
						},
						{
							"name": "Update Communication",
							"item": [
								{
									"name": "Add Communication",
									"item": [
										{
											"name": "Successful update: Add Communication",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"patches\": [\n      { \n        \"op\": \"add\",\n        \"path\": \"/extension/-\",\n        \"value\": {\n    \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSCommunication\",\n    \"extension\": [{\n            \"url\": \"language\",\n            \"valueCodeableConcept\": {\n                \"coding\": [{\n                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-HumanLanguage\",\n                        \"version\": \"1.0.0\",\n                        \"code\": \"q4\",\n                        \"display\": \"British Sign Language\"\n                    }\n                ]\n            }\n        }, {\n            \"url\": \"interpreterRequired\",\n            \"valueBoolean\": true\n        }\n    ]\n}\n      }\n  ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000033",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000033"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Replace Communication full extension",
									"item": [
										{
											"name": "Successful update: Replace Communication full extension",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"/*var sampleCode = [\r",
															"    q1,\r",
															"    q2,\r",
															"    q3,\r",
															"    q4,\r",
															"    q5,\r",
															"    ae,\r",
															"    ay,\r",
															"    az,\r",
															"    ba,\r",
															"    bm,\r",
															"    eu,\r",
															"    be,\r",
															"    bn,\r",
															"    bh,\r",
															"    bi,\r",
															"    bo,\r",
															"    bs,\r",
															"    br,\r",
															"    bg,\r",
															"    my,\r",
															"    ca,\r",
															"    cs,\r",
															"    ch,\r",
															"    ce,\r",
															"    zh,\r",
															"    cu,\r",
															"    cv,\r",
															"    kw,\r",
															"    co,\r",
															"    cr,\r",
															"    cy,\r",
															"    da,\r",
															"    de,\r",
															"    dv,\r",
															"    nl,\r",
															"    dz,\r",
															"    el\r",
															"]\r",
															"*/\r",
															"var test = [1,2]\r",
															"console.log(test)\r",
															"\r",
															"\r",
															"//const randomCode = sampleCode[Math.floor(Math.random() * sampleCode.length)];\r",
															"const randomCode = 'q1'\r",
															"pm.variables.set(\"randomCode\", randomCode);\r",
															"pm.variables.set(\"randomDisplay\", pm.variables.replaceIn(\"{{$randomColor}}\"));\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"patches\": [\n      { \n        \"op\": \"replace\",\n        \"path\": \"/extension/4\",\n        \"value\": {\n    \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSCommunication\",\n    \"extension\": [{\n            \"url\": \"language\",\n            \"valueCodeableConcept\": {\n                \"coding\": [{\n                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-HumanLanguage\",\n                        \"version\": \"1.0.0\",\n                        \"code\": \"q3\",\n                        \"display\": \"Australian Sign Language\"\n                    }\n                ]\n            }\n        }, {\n            \"url\": \"interpreterRequired\",\n            \"valueBoolean\": false\n        }\n    ]\n}\n      }\n  ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Replace Communication single item",
									"item": [
										{
											"name": "Successful update: Replace Communication single item",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"/*var sampleCode = [\r",
															"    q1,\r",
															"    q2,\r",
															"    q3,\r",
															"    q4,\r",
															"    q5,\r",
															"    ae,\r",
															"    ay,\r",
															"    az,\r",
															"    ba,\r",
															"    bm,\r",
															"    eu,\r",
															"    be,\r",
															"    bn,\r",
															"    bh,\r",
															"    bi,\r",
															"    bo,\r",
															"    bs,\r",
															"    br,\r",
															"    bg,\r",
															"    my,\r",
															"    ca,\r",
															"    cs,\r",
															"    ch,\r",
															"    ce,\r",
															"    zh,\r",
															"    cu,\r",
															"    cv,\r",
															"    kw,\r",
															"    co,\r",
															"    cr,\r",
															"    cy,\r",
															"    da,\r",
															"    de,\r",
															"    dv,\r",
															"    nl,\r",
															"    dz,\r",
															"    el\r",
															"]\r",
															"*/\r",
															"var test = [1,2]\r",
															"console.log(test)\r",
															"\r",
															"\r",
															"//const randomCode = sampleCode[Math.floor(Math.random() * sampleCode.length)];\r",
															"const randomCode = 'q1'\r",
															"pm.variables.set(\"randomCode\", randomCode);\r",
															"pm.variables.set(\"randomDisplay\", pm.variables.replaceIn(\"{{$randomColor}}\"));\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"patches\": [\n      { \n        \"op\": \"replace\",\n        \"path\": \"/extension/4/extension/0\",\n        \"value\": {\n            \"url\": \"language\",\n            \"valueCodeableConcept\": {\n                \"coding\": [{\n                        \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-HumanLanguage\",\n                        \"version\": \"1.0.0\",\n                        \"code\": \"q3\",\n                        \"display\": \"Australian Sign Language\"\n                    }\n                ]\n            }\n        }\n      }\n  ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Remove Communication",
									"item": [
										{
											"name": "Successful update: Remove Communication",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"/*var sampleCode = [\r",
															"    q1,\r",
															"    q2,\r",
															"    q3,\r",
															"    q4,\r",
															"    q5,\r",
															"    ae,\r",
															"    ay,\r",
															"    az,\r",
															"    ba,\r",
															"    bm,\r",
															"    eu,\r",
															"    be,\r",
															"    bn,\r",
															"    bh,\r",
															"    bi,\r",
															"    bo,\r",
															"    bs,\r",
															"    br,\r",
															"    bg,\r",
															"    my,\r",
															"    ca,\r",
															"    cs,\r",
															"    ch,\r",
															"    ce,\r",
															"    zh,\r",
															"    cu,\r",
															"    cv,\r",
															"    kw,\r",
															"    co,\r",
															"    cr,\r",
															"    cy,\r",
															"    da,\r",
															"    de,\r",
															"    dv,\r",
															"    nl,\r",
															"    dz,\r",
															"    el\r",
															"]\r",
															"*/\r",
															"var test = [1,2]\r",
															"console.log(test)\r",
															"\r",
															"\r",
															"//const randomCode = sampleCode[Math.floor(Math.random() * sampleCode.length)];\r",
															"const randomCode = 'q1'\r",
															"pm.variables.set(\"randomCode\", randomCode);\r",
															"pm.variables.set(\"randomDisplay\", pm.variables.replaceIn(\"{{$randomColor}}\"));\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"patches\": [\n      { \n        \"op\": \"test\",\n        \"path\": \"/extension/4/url\",\n        \"value\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-NHSCommunication\"\n      },\n      { \n        \"op\": \"remove\",\n        \"path\": \"/extension/4\"\n      }\n    ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								}
							]
						},
						{
							"name": "Update Contact Preferences",
							"item": [
								{
									"name": "Add Contact Preferences",
									"item": [
										{
											"name": "Successful update: Add Contact Preferences",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"patches\": [\n    {\n      \"op\": \"add\",\n      \"path\": \"/extension/-\",\n      \"value\":  {\n          \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactPreference\",\n          \"extension\": [{\n            \"url\": \"PreferredContactMethod\",\n            \"valueCodeableConcept\": {\n                \"coding\": [{\n                        \"code\": \"3\",\n                        \"display\": \"Telephone\",\n                        \"system\": \"https://fhir.nhs.uk/R4/ValueSet/UKCore-PreferredContactMethod\"\n                    }\n                ]\n            }\n        },\n        {\"url\": \"PreferredContactTimes\",\n                \"valueString\": \"anytime after 6pm\"\n        },\n        {\n            \"url\": \"PreferredWrittenCommunicationFormat\",\n            \"valueCodeableConcept\": {\n              \"coding\": [\n                {\n                  \"code\": \"11\",\n                  \"display\": \"Large Print\",\n                  \"system\": \"https://fhir.nhs.uk/R4/CodeSystem/UKCore-PreferredWrittenCommunicationFormat\"\n                }\n              ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000033",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000033"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Replace Single Contact Preference",
									"item": [
										{
											"name": "Successful update: Replace a Single Contact Preference",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"patches\": [\n    {\n      \"op\": \"replace\",\n      \"path\": \"/extension/5/extension/1\",\n      \"value\":  {\n            \"url\": \"PreferredContactMethod\",\n            \"valueCodeableConcept\": {\n                \"coding\": [{\n                        \"code\": \"3\",\n                        \"display\": \"Telephone\",\n                        \"system\": \"https://fhir.nhs.uk/R4/ValueSet/UKCore-PreferredContactMethod\"\n                    }\n                ]\n            }\n          }\n    }\n\n  ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Replace All Contact Preferences",
									"item": [
										{
											"name": "Successful update: Replace All Contact Preferences",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"patches\": [\n    {\n      \"op\": \"replace\",\n      \"path\": \"/extension/5\",\n      \"value\":  {\n          \"url\": \"https://fhir.nhs.uk/R4/StructureDefinition/Extension-UKCore-ContactPreference\",\n          \"extension\": [\n          {\n            \"url\": \"PreferredContactMethod\",\n            \"valueCodeableConcept\": {\n                \"coding\": [{\n                        \"code\": \"7\",\n                        \"display\": \"Sign language\",\n                        \"system\": \"https://fhir.nhs.uk/R4/ValueSet/UKCore-PreferredContactMethod\"\n                    }\n                ]\n            }\n          },\n          {\n            \"url\": \"PreferredContactTimes\",\n            \"valueString\": \"13:00\"\n          }\n        ]\n      }\n    }\n\n  ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Remove All Contact Preferences",
									"item": [
										{
											"name": "Successful update: Remove All Contact Preferences",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"patches\": [\n    {\n      \"op\": \"remove\",\n      \"path\": \"/extension/5\"\n    }\n  ]\n}"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Remove Single Contact Preference",
									"item": [
										{
											"name": "Successful update: Remove Single Contact Preference",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"request": {
												"method": "PATCH",
												"header": [
													{
														"key": "If-Match",
														"value": "W/\"2\"",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json-patch+json",
														"type": "text"
													},
													{
														"key": "X-Request-ID",
														"value": "{{$guid}}",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n  \"patches\": [\n   \t{\n      \"op\": \"test\",\n      \"path\": \"/extension/5/extension/0/url\",\n      \"value\": \"PreferredWrittenCommunicationFormat\"\n    },\n    {\n      \"op\": \"remove\",\n      \"path\": \"/extension/5/extension/2\"\n    }\n  ]\n}\n"
												},
												"url": {
													"raw": "{{base_url}}/Patient/9000000009?=",
													"host": [
														"{{base_url}}"
													],
													"path": [
														"Patient",
														"9000000009"
													],
													"query": [
														{
															"key": "",
															"value": ""
														}
													]
												}
											},
											"response": []
										}
									]
								}
							]
						}
					],
					"description": "In this folder you will find examples of using the PATCH method to update a patient's record.\n\nWhen you execute a successful scenario the response will return an updated patient record that looks like the patient has been updated with the changes you made. However, your changes will not be persisted in the sandbox environment, meaning if you perform a subsequent retrieve on the patient the record returned will hold the original patient data.\n\nJSON Patch operations themselves are validated, but the resulting resource is not validated for correctness, e.g business rules are not validated.\n\nIn order to perform a successful patch and see the update on the patient, each Valid Update test comprises of 1 request:\n\n1. Patch Request - will result in a 200 response with the outcome of the updated patient record.\n\nWhilst there are only 3 Valid Update scenarios scoped in the pack it is possible to add further update scenarios to perform patches on other attributes such as Addresses, Telecoms, Contact Preferences etc.",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Invalid Updates",
					"item": [
						{
							"name": "Invalid patch operations",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "If-Match",
										"value": "W/\"2\"",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{$guid}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/5\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000009",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								},
								"description": "Attempt to Patch a patient with an invalid patch operation, e.g. the path for the name instance is incorrect, results in an error response."
							},
							"response": []
						},
						{
							"name": "Invalid NHS Number",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "If-Match",
										"value": "W/\"2\"",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{$guid}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000000",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000000"
									]
								},
								"description": "Attempt to Patch for an invalid NHS number, results in an error response."
							},
							"response": []
						},
						{
							"name": "Patient doesn't exist",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "If-Match",
										"value": "W/\"2\"",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{$guid}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/5\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9111231130",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9111231130"
									]
								},
								"description": "Attempt to Patch a patient that doesn't exist (but providing a valid NHS number), results in an error response."
							},
							"response": []
						},
						{
							"name": "No patches sent",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "If-Match",
										"value": "W/\"2\"",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{$guid}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000009",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								},
								"description": "Attempt to Patch a patient with no patch submitted, results in an error response."
							},
							"response": []
						},
						{
							"name": "Incorrect resource version",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "W/\"1\"",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{$guid}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000009",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								},
								"description": "Attempt to Patch where the If-Match Header contains the incorrect version of the patient record, results in an error response."
							},
							"response": []
						},
						{
							"name": "Invalid Request ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "If-Match",
										"value": "W/\"2\"",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "12345",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"add\",\r\n      \"path\": \"/name/-\",\r\n      \"value\": {\r\n        \"use\": \"usual\",\r\n        \"period\": {\r\n          \"start\": \"2019-12-31\"\r\n        },\r\n        \"text\": \"Dr Joe H. M. Bloggs PhD\",\r\n        \"prefix\": \"Dr\",\r\n        \"given\": [\r\n          \"Joe\",\r\n          \"Horation\",\r\n          \"Maximus\"\r\n        ],\r\n        \"family\": \"Bloggs\",\r\n        \"suffix\": \"PhD\"\r\n      }\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000009",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								}
							},
							"response": []
						},
						{
							"name": "Wrong content type",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/fhir+json",
										"type": "text"
									},
									{
										"key": "If-Match",
										"value": "W/\"2\"",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{$guid}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000009",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								},
								"description": "Attempt to Patch where the Content-Type header is incorrect, results in an error response."
							},
							"response": []
						},
						{
							"name": "Missing resource version identifier",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									},
									{
										"key": "X-Request-ID",
										"value": "{{$guid}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"remove\",\r\n      \"path\": \"/name/0\"\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000009",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								},
								"description": "Attempt to Patch where the If-Match Header is missing, results in an error response."
							},
							"response": []
						},
						{
							"name": "Missing Request ID",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "If-Match",
										"value": "W/\"2\"",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json-patch+json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n  \"correction\": false,\r\n  \"patches\": [\r\n    {\r\n      \"op\": \"add\",\r\n      \"path\": \"/name/-\",\r\n      \"value\": {\r\n        \"use\": \"usual\",\r\n        \"period\": {\r\n          \"start\": \"2019-12-31\"\r\n        },\r\n        \"text\": \"Dr Joe H. M. Bloggs PhD\",\r\n        \"prefix\": \"Dr\",\r\n        \"given\": [\r\n          \"Joe\",\r\n          \"Horation\",\r\n          \"Maximus\"\r\n        ],\r\n        \"family\": \"Bloggs\",\r\n        \"suffix\": \"PhD\"\r\n      }\r\n    }\r\n  ]\r\n}"
								},
								"url": {
									"raw": "{{base_url}}/Patient/9000000009",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"Patient",
										"9000000009"
									]
								}
							},
							"response": []
						}
					]
				}
			],
			"description": "Example requests that relate to the Update (Patch) Patient endpoint, as described under:\n\nhttps://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir#api-Default-update-patient-partial",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Retrieve a patient's related people",
			"item": [
				{
					"name": "Single Related Person exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"one related person\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.total).to.eql(1);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient/9000000017/RelatedPerson",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000017",
								"RelatedPerson"
							]
						},
						"description": "Example of a successful relatedPerson request where a single related person is present"
					},
					"response": []
				},
				{
					"name": "Related Persons do not exist",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"no results\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.total).to.eql(0);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient/9000000025/RelatedPerson",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000025",
								"RelatedPerson"
							]
						},
						"description": "Example of a successful relatedPerson request where multiple related people are present"
					},
					"response": []
				},
				{
					"name": "Multiple Related Persons exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"two related persons\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData.total).to.eql(2);\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/Patient/9000000009/RelatedPerson",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"Patient",
								"9000000009",
								"RelatedPerson"
							]
						},
						"description": "Example of a successful relatedPerson request where multiple related people are present"
					},
					"response": []
				}
			],
			"description": "Example requests that relate to the Update (Patch) Patient endpoint, as described under:\n\nhttps://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir#api-Default-get-related-people",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "HEALTHCARE_WORKER",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": ""
		},
		{
			"key": "contentLocation",
			"value": ""
		}
	]
}