from ..configuration.config import TEST_PATIENT_ID, SPINE_HOSTNAME


retrieve = [
    {"scenario": "retrieve_patient", "patient": "9693632109", "response": {"address": [{"id": "9F4FF65D", "line": ["testing", "testing", "testing", "testing", "testing"], "period":{"start": "2021-01-22"}, "postalCode": "HL12 6HL", "use": "home"}], "birthDate": "2010-01-22", "extension": [{"extension": [{"url": "language", "valueCodeableConcept": {"coding": [{"code": "hy", "display": "Armenian", "system": "https://fhir.hl7.org.uk/CodeSystem/UKCore-HumanLanguage", "version": "1.0.0"}]}}, {"url": "interpreterRequired", "valueBoolean": False}], "url": "https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSCommunication"}], "gender": "female", "id": "9693632109", "identifier": [{"extension": [{"url": "https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus", "valueCodeableConcept": {"coding": [{"code": "01", "display": "Number present and verified", "system": "https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus", "version": "1.0.0"}]}}], "system": "https://fhir.nhs.uk/Id/nhs-number", "value": "9693632109"}], "meta": {"security": [{"code": "U", "display": "unrestricted", "system": "http://terminology.hl7.org/CodeSystem/v3-Confidentiality"}], "versionId": "19"}, "name": [{"family": "Bogan", "given": ["Testing"], "id":"7EB47E61", "period":{"start": "2021-01-22"}, "prefix": ["Mr"], "suffix":["Bsc"], "use":"usual"}], "resourceType":"Patient"}},  # noqa: E231, E501
    {"scenario": "retrieve_auth_header_missing_or_blank", "patient": "9693632109", "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "forbidden", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1", "code": "ACCESS_DENIED", "display": "Access Denied - Unauthorised"}]}, "diagnostics": "Invalid access token"}]}},  # noqa: E231, E501
    {"scenario": "retrieve_auth_header_invalid_token", "patient": "9693632109", "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "forbidden", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1", "code": "ACCESS_DENIED", "display": "Access Denied - Unauthorised"}]}, "diagnostics": "Invalid Access Token"}]}},  # noqa: E231, E501
    {"scenario": "retrieve_urid_header_missing", "patient": "9693632109", "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "value", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1", "code": "MISSING_VALUE", "display": "Required value is missing"}]}, "diagnostics": "Missing value in header 'NHSD-Session-URID'"}]}},  # noqa: E231, E501
    {"scenario": "retrieve_x_request_header_blank", "patient": "9693632109", "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "value", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1", "code": "INVALID_VALUE", "display": "Provided value is invalid"}]}, "diagnostics": "Invalid value - '' in header 'X-Request-ID'"}]}},  # noqa: E231, E501
    {"scenario": "retrieve_x_request_header_invalid", "patient": "9693632109", "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "value", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1", "code": "INVALID_VALUE", "display": "Provided value is invalid"}]}, "diagnostics": "Invalid value - '1234' in header 'X-Request-ID'"}]}},  # noqa: E231, E501
    {"scenario": "retrieve_x_request_header_missing", "patient": "9693632109", "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "structure", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1", "code": "PRECONDITION_FAILED", "display": "Required condition was not fulfilled"}]}, "diagnostics": "Invalid request with error - X-Request-ID header must be supplied to access this resource"}]}},  # noqa: E231, E501
    {"scenario": "retrieve_related_person", "patient": "9693633679", "response": {"entry":[{"fullUrl":f"{SPINE_HOSTNAME}/personal-demographics/FHIR/R4/Patient/9693633679/RelatedPerson/qWyGt","resource":{"active":True,"id":"qWyGt","patient":{"identifier":{"system":"https://beta.api.digital.nhs.uk","value":"9693633687"},"reference":"https://beta.api.digital.nhs.uk/Patient/9693633687","type":"Patient"},"relationship":[{"coding":[{"code":"SPS","display":"spouse","system":"http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype"},{"code":"Personal","display":"Personal relationship with the patient","system":"https://fhir.nhs.uk/R4/CodeSystem/UKCore-AdditionalRelatedPersonRole"},{"code":"N","display":"Next-of-Kin","system":"http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype"}]}],"resourceType":"RelatedPerson"}}],"resourceType":"Bundle","total":1,"type":"searchset"}},  # noqa: E231, E501
    {"scenario": "retrieve_urid_header_invalid", "patient": "9693632109", "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "value", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1", "code": "INVALID_VALUE", "display": "Provided value is invalid"}]}, "diagnostics": "Invalid value - 'invalid' in header 'NHSD-Session-URID'. Refer to the guidance for this header in our API Specification https://digital.nhs.uk/developer/api-catalogue/personal-demographics-service-fhir"}]}}  # noqa: E231, E501
]

search = [
    {"scenario": "simple_search_happy_path","query_params": {"family": "Capon", "gender": "male", "birthdate": "eq1953-05-29"}, "response":{"entry":[{"fullUrl":f"{SPINE_HOSTNAME}/personal-demographics/FHIR/R4/Patient/9693632117","resource":{"address":[{"id":"XlHnU","line":["21 SCAWBY VIEW","SCAWBY","BRIGG","S HUMBERSIDE"],"period":{"start":"1988-06-21"},"postalCode":"DN20 9RH","use":"home"}],"birthDate":"1953-05-29","gender":"male","generalPractitioner":[{"id":"fwlsk","identifier":{"period":{"start":"2012-02-22"},"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"A20047"},"type":"Organization"}],"id":"9693632117","identifier":[{"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"code":"01","display":"Number present and verified","system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0"}]}}],"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9693632117"}],"meta":{"security":[{"code":"U","display":"unrestricted","system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality"}],"versionId":"1"},"name":[{"family":"CAPON","given":["Bob","Will"],"id":"oeFNi","period":{"start":"1955-07-18"},"prefix":["MR"],"use":"usual"}],"resourceType":"Patient"},"search":{"score":1}}],"resourceType":"Bundle","total":1,"type":"searchset"}},  # noqa: E231, E501
    {"scenario": "simple_search_with_auth_header_missing_or_blank","query_params": {"family": "Capon", "gender": "male", "birthdate": "eq1953-05-29"}, "response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"forbidden","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"ACCESS_DENIED","display":"Access Denied - Unauthorised"}]},"diagnostics":"Invalid access token"}]}},  # noqa: E231, E501
    {"scenario": "simple_search_with_auth_header_invalid_token","query_params": {"family": "Capon", "gender": "male", "birthdate": "eq1953-05-29"}, "response": {"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "forbidden", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1","code": "ACCESS_DENIED", "display": "Access Denied - Unauthorised"}]},"diagnostics": "Invalid Access Token"}]}},  # noqa: E231, E501
    {"scenario": "simple_search_with_urid_header_missing","query_params": {"family": "Capon", "gender": "male", "birthdate": "eq1953-05-29"}, "response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"value","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"MISSING_VALUE","display":"Required value is missing"}]},"diagnostics":"Missing value in header 'NHSD-Session-URID'"}]}},  # noqa: E231, E501
    {"scenario": "simple_search_with_x_request_header_blank","query_params": {"family": "Capon", "gender": "male", "birthdate": "eq1953-05-29"}, "response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"value","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"INVALID_VALUE","display":"Provided value is invalid"}]},"diagnostics":"Invalid value - '' in header 'X-Request-ID'"}]}},  # noqa: E231, E501
    {"scenario": "simple_search_with_x_request_header_invalid","query_params": {"family": "Capon", "gender": "male", "birthdate": "eq1953-05-29"}, "response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"value","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"INVALID_VALUE","display":"Provided value is invalid"}]},"diagnostics":"Invalid value - '1234' in header 'X-Request-ID'"}]}},  # noqa: E231, E501
    {"scenario": "simple_search_with_x_request_header_missing","query_params": {"family": "Capon", "gender": "male", "birthdate": "eq1953-05-29"}, "response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"structure","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"PRECONDITION_FAILED","display":"Required condition was not fulfilled"}]},"diagnostics":"Invalid request with error - X-Request-ID header must be supplied to access this resource"}]}},  # noqa: E231, E501
    {"scenario": "simple_search_happy_path","query_params": {"family": "Massam", "birthdate": "eq1920-08-11"}, "response":{"entry":[{"fullUrl":f"{SPINE_HOSTNAME}/personal-demographics/FHIR/R4/Patient/9693632966","resource":{"address":[{"extension":[{"extension":[{"url":"type","valueCoding":{"code":"PAF","system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType"}},{"url":"value","valueString":"06310553"}],"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey"}],"id":"rGPsv","line":["49 MESSINGHAM LANE","SCAWBY","BRIGG","S HUMBERSIDE"],"period":{"start":"2021-08-04"},"postalCode":"DN20 9BB","use":"home"}],"birthDate":"1920-08-11","gender":"female","generalPractitioner":[{"id":"HOvkU","identifier":{"period":{"start":"2012-01-18"},"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"A20047"},"type":"Organization"}],"id":"9693632966","identifier":[{"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"code":"01","display":"Number present and verified","system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0"}]}}],"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9693632966"}],"meta":{"security":[{"code":"U","display":"unrestricted","system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality"}],"versionId":"4"},"name":[{"family":"MASSAM","given":["Martha","Carol"],"id":"AAFhg","period":{"start":"2011-09-08"},"prefix":["MRS"],"use":"usual"}],"resourceType":"Patient"},"search":{"score":1}}],"resourceType":"Bundle","total":1,"type":"searchset"}},  # noqa: E231, E501
    {"scenario": "simple_search_happy_path","query_params": {"family": "Massam", "birthdate": "le1920-08-11"}, "response":{"entry":[{"fullUrl":f"{SPINE_HOSTNAME}/personal-demographics/FHIR/R4/Patient/9693632966","resource":{"address":[{"extension":[{"extension":[{"url":"type","valueCoding":{"code":"PAF","system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-AddressKeyType"}},{"url":"value","valueString":"06310553"}],"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-AddressKey"}],"id":"rGPsv","line":["49 MESSINGHAM LANE","SCAWBY","BRIGG","S HUMBERSIDE"],"period":{"start":"2021-08-04"},"postalCode":"DN20 9BB","use":"home"}],"birthDate":"1920-08-11","gender":"female","generalPractitioner":[{"id":"HOvkU","identifier":{"period":{"start":"2012-01-18"},"system":"https://fhir.nhs.uk/Id/ods-organization-code","value":"A20047"},"type":"Organization"}],"id":"9693632966","identifier":[{"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"code":"01","display":"Number present and verified","system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0"}]}}],"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9693632966"}],"meta":{"security":[{"code":"U","display":"unrestricted","system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality"}],"versionId":"4"},"name":[{"family":"MASSAM","given":["Martha","Carol"],"id":"AAFhg","period":{"start":"2011-09-08"},"prefix":["MRS"],"use":"usual"}],"resourceType":"Patient"},"search":{"score":1}}],"resourceType":"Bundle","total":1,"type":"searchset"}},  # noqa: E231, E501
    {"scenario": "simple_search_patient_happy_path_sensitive", "query_params": {"family": "Godsoe", "gender": "male", "birthdate": "eq1936-02-24"}, "response":{"entry":[{"fullUrl":f"{SPINE_HOSTNAME}/personal-demographics/FHIR/R4/Patient/9693632125","resource":{"birthDate":"1936-02-24","gender":"male","id":"9693632125","identifier":[{"extension":[{"url":"https://fhir.hl7.org.uk/StructureDefinition/Extension-UKCore-NHSNumberVerificationStatus","valueCodeableConcept":{"coding":[{"code":"01","display":"Number present and verified","system":"https://fhir.hl7.org.uk/CodeSystem/UKCore-NHSNumberVerificationStatus","version":"1.0.0"}]}}],"system":"https://fhir.nhs.uk/Id/nhs-number","value":"9693632125"}],"meta":{"security":[{"code":"R","display":"restricted","system":"http://terminology.hl7.org/CodeSystem/v3-Confidentiality"}],"versionId":"2"},"name":[{"family":"GODSOE","given":["Rodney","Jeff"],"id":"lLXvC","period":{"start":"1996-06-13"},"prefix":["MR"],"use":"usual"}],"resourceType":"Patient"},"search":{"score":1}}],"resourceType":"Bundle","total":1,"type":"searchset"}},  # noqa: E231, E501
]

update = [
    {"scenario": "update_dob_happy_path", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/gender","value":"male"}]}},  # noqa: E231, E501
    {"scenario": "update_with_auth_header_missing_or_blank", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/birthDate","value":"2001-01-01"}]},"response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"forbidden","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"ACCESS_DENIED","display":"Access Denied - Unauthorised"}]},"diagnostics":"Invalid access token"}]}},  # noqa: E231, E501
    {"scenario": "update_with_auth_header_invalid", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/birthDate","value":"2001-01-01"}]},"response":{"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "forbidden", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1","code": "ACCESS_DENIED", "display": "Access Denied - Unauthorised"}]},"diagnostics": "Invalid Access Token"}]}},  # noqa: E231, E501
    {"scenario": "update_with__urid_header_missing", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/birthDate","value":"2001-01-01"}]},"response":{"resourceType": "OperationOutcome", "issue": [{"severity": "error", "code": "value", "details": {"coding": [{"system": "https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode", "version": "1","code": "MISSING_VALUE", "display": "Required value is missing"}]},"diagnostics": "Missing value in header 'NHSD-Session-URID'"}]}},  # noqa: E231, E501
    {"scenario": "update_with_x_request_header_blank", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/birthDate","value":"2001-01-01"}]},"response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"value","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"INVALID_VALUE","display":"Provided value is invalid"}]},"diagnostics":"Invalid value - '' in header 'X-Request-ID'"}]}},  # noqa: E231, E501
    {"scenario": "update_with_x_request_header_invalid", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/birthDate","value":"2001-01-01"}]}, "response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"value","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"INVALID_VALUE","display":"Provided value is invalid"}]},"diagnostics":"Invalid value - '1234' in header 'X-Request-ID'"}]}},  # noqa: E231, E501
    {"scenario": "update_with_x_request_header_missing", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/birthDate","value":"2001-01-01"}]},"response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"structure","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"PRECONDITION_FAILED","display":"Required condition was not fulfilled"}]},"diagnostics":"Invalid request with error - X-Request-ID header must be supplied to access this resource"}]}},  # noqa: E231, E501
    {"scenario": "update_with_low_x_sync_wait", "patient": TEST_PATIENT_ID,"patch":{"patches":[{"op":"replace","path":"/birthDate","value":"2001-01-01"}]},"response":{"resourceType":"OperationOutcome","issue":[{"severity":"error","code":"structure","details":{"coding":[{"system":"https://fhir.nhs.uk/R4/CodeSystem/Spine-ErrorOrWarningCode","version":"1","code":"SERVICE_UNAVAILABLE","display":"Service unavailable"}]},"diagnostics":"The downstream domain processing has not completed within the configured timeout period. Retry your request after the time specified by the 'Retry-After' header, using the same 'X-Request-ID'"}]}},  # noqa: E231, E501
]
